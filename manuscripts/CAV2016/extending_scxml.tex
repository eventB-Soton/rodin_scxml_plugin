% !TEX root = main.tex

\section{Extending SCXML}
\label{sect:extension}


To facilitate Event-B formal verification, extensions to the SCXML modelling notation are necessary so that additional modelling features required by Event-B can be integrated with the SCXML model.
The SCXML schema allows extension elements and attributes belonging to a different namespace to be added. The tooling (both XML and EMF) provides fallback mechanisms so that these extensions are supported without the need for syntactic definition. We define a new namespace,  \emph{iumlb} and add two new elements, \emph{iumlb:invariant} and \emph{iumlb:guard} (Table \ref{iumlb_elements_table}) as well as a number of new attributes which are shown in Table \ref{iumlb_attributes_table}.
 Invariants are not supported in SCXML but are needed to describe verifiable properties of a model. SCXML Transitions only have a single \emph{cond} attribute whereas we need to introduce conjuncts of a transition condition at various refinement steps and may also need to designate some invariants or guards as theorems that can be derived from the preceding conjuncts. 
New attributes are introduced to support the predicate (string) and the derived (boolean) theorem property of invariants and guards. The concept of refinement is not supported in SCXML. We introduce a new integer valued attribute, \emph{iumlb:refinement}, which may be attached to any element of either namespace in order to specify the refinement level of that element. 


% Please add the following required packages to your document preamble:
% \usepackage{multirow}
% \usepackage{graphicx}
\begin{table}[tbp]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{|l|l|l|}
\hline
\textbf{iumlb Element}           & \textbf{Meaning}                                             & \textbf{Legal Attributes} \\ \hline
\multirow{5}{*}{iumlb:invariant} & \multirow{5}{*}{generates an invariant in Event-B or iUML-B} & iumlb:name,               \\
                                 &                                                              & iumlb:derived,            \\
                                 &                                                              & iumlb:predicate,          \\
                                 &                                                              & iumlb:comment,            \\
                                 &                                                              & iuml:refinement           \\ \hline
\multirow{5}{*}{iumlb:guard}     & \multirow{5}{*}{generates a guard in Event-B or iUML-B}      & iumlb:name,               \\
                                 &                                                              & iumlb:derived,            \\
                                 &                                                              & iumlb:predicate,          \\
                                 &                                                              & iumlb:comment,            \\
                                 &                                                              & iuml:refinement           \\ \hline
\end{tabular}%
}
\caption{New Elements}
\label{iumlb_elements_table}
\end{table}

% Please add the following required packages to your document preamble:
% \usepackage{multirow}
% \usepackage{graphicx}
\begin{table}[tbp]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{|l|l|l|}
\hline
\textbf{iumlb Attribute}           & \textbf{Meaning}                                                                                                           & \textbf{Legal Parents}   \\ \hline
iumlb:label                        & string used as the name of an Event-B event elaborated by the generated i-UML-B transition                                 & scxml:transition         \\ \hline
\multirow{11}{*}{iumlb:refinement} & \multirow{11}{*}{non-negative integer representing the refinement level at which the parent element should be introduced.} & scxml:scxml,             \\
                                   &                                                                                                                            & scxml:datamodel,         \\
                                   &                                                                                                                            & scxml:data,              \\
                                   &                                                                                                                            & scxml:state,             \\
                                   &                                                                                                                            & scxml:parallel,          \\
                                   &                                                                                                                            & scxml:transition,        \\
                                   &                                                                                                                            & scxml:onEntry,           \\
                                   &                                                                                                                            & scxml:onExit,            \\
                                   &                                                                                                                            & scxml:assign             \\
                                   &                                                                                                                            & iumlb:invariant,         \\
                                   &                                                                                                                            & iumlb:guard              \\ \hline
\multirow{3}{*}{iumlb:comment}     & \multirow{3}{*}{string used as a comment on the generated iUML-B element}                                                  & iumlb:invariant,         \\
                                   &                                                                                                                            & iumlb:guard,             \\
                                   &                                                                                                                            & (could be added to more) \\ \hline
iumlb:type                         & string used as the membership set for the Event-B variable generated from the parent data element                          & scxml:data               \\ \hline
\multirow{2}{*}{iumlb:name}        & \multirow{2}{*}{string used for the name or label of a generated iUML-B element}                                           & iumlb:invariant,         \\
                                   &                                                                                                                            & iumlb:guard              \\ \hline
\multirow{2}{*}{iumlb:predicate}   & \multirow{2}{*}{string used for the predicate of a guard or invariant}                                                     & iumlb:invariant,         \\
                                   &                                                                                                                            & iumlb:guard              \\ \hline
\multirow{2}{*}{iumlb:derived}     & \multirow{2}{*}{boolean indicating that the guard is a theorem (default to false)}                                         & iumlb:invariant,         \\
                                   &                                                                                                                            & iumlb:guard              \\ \hline
\end{tabular}%
}
\caption{New Attributes}
\label{iumlb_attributes_table}
\end{table}

%------------------------------------------------------------------------------
